<!doctype html><html lang=es class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Veremos como simular con LTSPICE en Ubuntu y como hacerlo en KiCAD"><link href=https://fgcoca.github.io/Simulacion-de-circuitos-electronicos/KiCAD/opamp/ rel=canonical><meta name=author content="Federico Coca"><link rel="shortcut icon" href=../../img/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-5.4.0"><title>Amplificadores operacionales - Simulacion de circuitos electronicos</title><link rel=stylesheet href=../../assets/stylesheets/main.fe0cca5b.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.a46bcfb3.min.css><meta name=theme-color content=#03a9f4><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style></head> <body dir=ltr data-md-color-scheme data-md-color-primary=light-blue data-md-color-accent=deep-purple> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#amplificadores-operacionales class=md-skip> Saltar a contenido </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Cabecera> <a href=https://fgcoca.github.io/Simulacion-de-circuitos-electronicos/ title="Simulacion de circuitos electronicos" class="md-header-nav__button md-logo" aria-label="Simulacion de circuitos electronicos"> <img src=../../img/favicon.png alt=logo> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Simulacion de circuitos electronicos </span> <span class="md-header-nav__topic md-ellipsis"> Amplificadores operacionales </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Búsqueda placeholder=Búsqueda autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Limpiar data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/fgcoca/Simulacion-de-circuitos-electronicos title="Ir al repositorio" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> fgcoca/Simulacion-de-circuitos-electronicos </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navegación data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://fgcoca.github.io/Simulacion-de-circuitos-electronicos/ title="Simulacion de circuitos electronicos" class="md-nav__button md-logo" aria-label="Simulacion de circuitos electronicos"> <img src=../../img/favicon.png alt=logo> </a> Simulacion de circuitos electronicos </label> <div class=md-nav__source> <a href=https://github.com/fgcoca/Simulacion-de-circuitos-electronicos title="Ir al repositorio" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> fgcoca/Simulacion-de-circuitos-electronicos </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. title=Introducción class=md-nav__link> Introducción </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Aplicaciones <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Aplicaciones data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Aplicaciones </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Instalaciones/wine/ title=Wine class=md-nav__link> Wine </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-2 type=checkbox id=nav-2-2> <label class=md-nav__link for=nav-2-2> LTSpice <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=LTSpice data-md-level=2> <label class=md-nav__title for=nav-2-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> LTSpice </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Instalaciones/LTSpice/Ins-LTSpice/ title="Instalación y ejecución" class=md-nav__link> Instalación y ejecución </a> </li> <li class=md-nav__item> <a href=../../Ejemplos/explicacion/ title="Ejemplos iniciales de simulación" class=md-nav__link> Ejemplos iniciales de simulación </a> </li> <li class=md-nav__item> <a href=../../Instalaciones/LTSpice/Elementos/ title="Elementos de circuito" class=md-nav__link> Elementos de circuito </a> </li> <li class=md-nav__item> <a href=../../Instalaciones/LTSpice/Tipos-analisis/ title="Tipos de análisis" class=md-nav__link> Tipos de análisis </a> </li> <li class=md-nav__item> <a href=../../Instalaciones/LTSpice/Fourier/ title="Análisis de Fourier" class=md-nav__link> Análisis de Fourier </a> </li> <li class=md-nav__item> <a href=../../Instalaciones/LTSpice/Mas-conceptos/ title="Mas conceptos de simulación" class=md-nav__link> Mas conceptos de simulación </a> </li> <li class=md-nav__item> <a href=../../Instalaciones/LTSpice/ref/ title=Reflexión class=md-nav__link> Reflexión </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3 checked> <label class=md-nav__link for=nav-3> KiCAD <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=KiCAD data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> KiCAD </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../kc-intro/ title=Introducción class=md-nav__link> Introducción </a> </li> <li class=md-nav__item> <a href=../resumen-manual/ title="Resumen de fuentes de excitación y tipos de análisis" class=md-nav__link> Resumen de fuentes de excitación y tipos de análisis </a> </li> <li class=md-nav__item> <a href=../red-rc/ title="Red RC básica" class=md-nav__link> Red RC básica </a> </li> <li class=md-nav__item> <a href=../sonda-ajustar/ title="Elementos Sonda y Ajustar del simulador" class=md-nav__link> Elementos Sonda y Ajustar del simulador </a> </li> <li class=md-nav__item> <a href=../ampl-bip/ title="Amplificador con transistor bipolar" class=md-nav__link> Amplificador con transistor bipolar </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Amplificadores operacionales <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title="Amplificadores operacionales" class="md-nav__link md-nav__link--active"> Amplificadores operacionales </a> <nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Tabla de contenidos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#amplificador-inversor class=md-nav__link> Amplificador inversor </a> </li> <li class=md-nav__item> <a href=#filtros-de-sallen-key class=md-nav__link> Filtros de Sallen-Key </a> <nav class=md-nav aria-label="Filtros de Sallen-Key"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#introduccion class=md-nav__link> Introducción </a> </li> <li class=md-nav__item> <a href=#filtro-pasa-banda-con-operacional-dual class=md-nav__link> Filtro pasa banda con operacional dual </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../temp-555/ title="Temporizador 555" class=md-nav__link> Temporizador 555 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> Miscelanea <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Miscelanea data-md-level=1> <label class=md-nav__title for=nav-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Miscelanea </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Miscelanea/about/ title=Autor class=md-nav__link> Autor </a> </li> <li class=md-nav__item> <a href=../../Miscelanea/lic/ title=Licencias class=md-nav__link> Licencias </a> </li> <li class=md-nav__item> <a href=../../Miscelanea/webgrafia/ title=Webgrafia/Bibliografía class=md-nav__link> Webgrafia/Bibliografía </a> </li> <li class=md-nav__item> <a href=../../Miscelanea/soft/ title="Software utilizado" class=md-nav__link> Software utilizado </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Tabla de contenidos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#amplificador-inversor class=md-nav__link> Amplificador inversor </a> </li> <li class=md-nav__item> <a href=#filtros-de-sallen-key class=md-nav__link> Filtros de Sallen-Key </a> <nav class=md-nav aria-label="Filtros de Sallen-Key"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#introduccion class=md-nav__link> Introducción </a> </li> <li class=md-nav__item> <a href=#filtro-pasa-banda-con-operacional-dual class=md-nav__link> Filtro pasa banda con operacional dual </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1 id=amplificadores-operacionales>Amplificadores operacionales<a class=headerlink href=#amplificadores-operacionales title="Permanent link">&para;</a></h1> <p>Vamos a introducir aquí un par de circuitos para simulación desde KiCAD. Aprenderemos a trabajar con Netlist y explicaré los que a mi entender son los tres tipos de análisis fundamentales y para ello vamos a utilizar un circuito estándar con amplificador operacional como es el amplificador inversor de una determinada ganancia.</p> <h2 id=amplificador-inversor>Amplificador inversor<a class=headerlink href=#amplificador-inversor title="Permanent link">&para;</a></h2> <p>Veamos en primer lugar el circuito a montar y como generamos una netlist. En la imagen 1 tenemos el esquemático del circuito a simular. El esquema corresponde a un amplificador inversor de ganancia 25 con una fuente de alimentación dual de 15V.</p> <p><center></p> <table> <thead> <tr> <th align=center>Imagen 1</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Esquema del amplificador inversor" src=../../img/kicad/opamp/i1.png></td> </tr> <tr> <td align=center>Esquema del amplificador inversor</td> </tr> </tbody> </table> <p></center></p> <p>Podemos utilizar los modelos spice de proveedores como <a href=http://www.ti.com/ >Texas Instruments</a> o <a href=http://www.linear.com/ >Linear Technology</a> para definir el amplificador operacional. En nuestro caso vamos a utilizar el <a href=https://www.ti.com/lit/zip/snom211>modelo del LM741 de Texas Instruments</a> para trabajar.</p> <p>Tenemos por otro lado el problema de que la numeración de pines que hay en la descripción del modelo spice (imagen 2) no cumple con la numeración de pines del símbolo U1 de KiCad, el LM741. El modelo requiere la siguiente secuencia:</p> <ul> <li>entrada no inversora</li> <li>entrada inversora</li> <li>Alimentación positiva</li> <li>Alimentación negativa</li> <li>Salida</li> </ul> <p><center></p> <table> <thead> <tr> <th align=center>Imagen 2</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Numeración de pines en el modelo spice del LM741" src=../../img/kicad/opamp/i2.png></td> </tr> <tr> <td align=center>Numeración de pines en el modelo spice del LM741</td> </tr> </tbody> </table> <p></center></p> <p>En KiCAD los pares son:</p> <ul> <li>entrada inversora -&gt; 2</li> <li>entrada no inversora -&gt; 3</li> <li>Alimentación negativa -&gt; 4</li> <li>Alimentación positiva -&gt; 7</li> <li>Salida 6</li> </ul> <p>Es decir, necesitamos que los pines de KiCad estén ordenarse en la secuencia 3 2 7 4 6 y para ello dispone del campo 'Secuencia alternativa de nodo'. El proceso completo de asignación de modelo y secuencia de pines lo vemos en la imagen 3, donde se ven los ajustes finales.</p> <table> <thead> <tr> <th align=center>Imagen 3</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Ajustes finales de asignación del modelo spice del LM741" src=../../img/kicad/opamp/i3.png></td> </tr> <tr> <td align=center>Ajustes finales de asignación del modelo spice del LM741</td> </tr> </tbody> </table> <p></center></p> <p>Los resultados de la simulación los vemos en la imagen 4.</p> <p><center></p> <table> <thead> <tr> <th align=center>Imagen 4</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Resultado de la simulación .tran" src=../../img/kicad/opamp/i4.png></td> </tr> <tr> <td align=center>Resultado de la simulación .tran</td> </tr> </tbody> </table> <p></center></p> <p>Vamos ahora a introducir una nueva simulación, en este caso <code>.ac</code> para ver la respuesta en frecuencia, así que procedemos a comentar la anterior (<code>*.tran 50u 5m</code>) y a introducir <code>.ac dec 10 1 1MEG</code>. Ejecutamos los pasos habituales y en la imagen 5 podemos ver el resultado de la nueva simulación.</p> <p><center></p> <table> <thead> <tr> <th align=center>Imagen 5</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Respuesta en frecuencia del amplificador inversor" src=../../img/kicad/opamp/i5.png></td> </tr> <tr> <td align=center>Respuesta en frecuencia del amplificador inversor</td> </tr> </tbody> </table> <p></center></p> <p>Vamos a generar la lista de conexiones del circuito accediendo a través del icono correspondiente y seleccionando de entre las opciones disponibles la de <em>Spice</em>, tal y como observamos en la imagen 6.</p> <p><center></p> <table> <thead> <tr> <th align=center>Imagen 6</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Ventana de selección de tipo de netlist" src=../../img/kicad/opamp/i6.png></td> </tr> <tr> <td align=center>Ventana de selección de tipo de netlist</td> </tr> </tbody> </table> <p></center></p> <p>Pulsamos en <em>Generar lista de redes</em> y se creará un archivo .cir en el directorio de nuestro proyecto. Si abrimos ese archivo con un editor de texto veremos lo que aparece en la imagen 7.</p> <p><center></p> <table> <thead> <tr> <th align=center>Imagen 7</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Netlist Spice del amplificador inversor" src=../../img/kicad/opamp/i7.png></td> </tr> <tr> <td align=center>Netlist Spice del amplificador inversor</td> </tr> </tbody> </table> <p></center></p> <p>Podemos observar el nombre del archivo, la librería que estamos utilizando, la lista de conexiones en formato texto legibles por otras aplicaciones que integren spice y cabe destacar como la referencia del circuito integrado se ha renombrado a XU1, indicando la X que es un modelo Spice. Podemos comprobarlo accediendo desde el esquemático a las propiedades del componente y se nos mostrará la ventana de la imagen 8.</p> <p><center></p> <table> <thead> <tr> <th align=center>Imagen 8</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Propiedades del compoente U1" src=../../img/kicad/opamp/i8.png></td> </tr> <tr> <td align=center>Propiedades del compoente U1</td> </tr> </tbody> </table> <p></center></p> <p>El ejemplo lo podemos <a href=../kc-ejemplos/opamp/Am_inversor/Am_inversor.zip>descargar</a> para trabajar con el mismo.</p> <h2 id=filtros-de-sallen-key>Filtros de Sallen-Key<a class=headerlink href=#filtros-de-sallen-key title="Permanent link">&para;</a></h2> <p>Vamos a aprovechar que con KiCAD viene con un filtro pasa baja de orden 2 de este tipo para introducir este tipo de filtro y finalmente construir un filtro pasa banda con células Sallen-Key.</p> <h3 id=introduccion>Introducción<a class=headerlink href=#introduccion title="Permanent link">&para;</a></h3> <p>Cuando hablamos de configuraciones sencillas de filtros de primer orden y segundo orden Sallen-Key es una de las configuraciones más comunes que se puede convertir en un bloque que permita crear filtros de ordenes mas altas.</p> <p>Ahora bien, existe una relación entre la ganancia en tensión y el factor de calidad por efecto del amplificador operacional que se utiliza. Se pueden obtener valores de Q mayores que 0.5 porque al usar una configuración no inversora, la ganancia en tensión siempre será mayor que la unidad, pero debe ser menor que 3 o el sistema se volverá inestable.</p> <p>Un filtro pasa alta de Sallen-Key lo vemos en la imagen 9. Podemos observar que los condensadores no están conectados a GND sino en la realimentación positiva del amplificador y que el operacional está configurado como un búfer de ganancia unidad.</p> <p><center></p> <table> <thead> <tr> <th align=center>Imagen 9</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Célula Sallen-Key pasa alta" src=../../img/kicad/opamp/i9.png></td> </tr> <tr> <td align=center>Célula Sallen-Key pasa alta</td> </tr> </tbody> </table> <p></center></p> <p>Con C1, R1, C2 y R2 se forma el filtro de segundo orden en el que los condensadores para las bajas frecuencias se comportan como circuitos abiertos no reflejándose la señal de entrada en la salida y para las altas frecuencias apenas tendrán efecto en la señal de entrada pasando esta a la salida. Ahora bien, cerca del punto correspondiente a la frecuencia de corte las reactancias capacitivas serán del mismo valor que las resistencias por lo que existe realimentación positiva a través de C2 que proporciona ganancia en tensión.</p> <p>La frecuencia de corte vendrá dada por:</p> <p><center></p> <p><span><span class=MathJax_Preview>f_{c}=\dfrac{1}{2\pi\sqrt {R_{1}\cdot C_{1}\cdot R2\cdot C2}}</span><script type=math/tex>f_{c}=\dfrac{1}{2\pi\sqrt {R_{1}\cdot C_{1}\cdot R2\cdot C2}}</script></span></p> <p></center></p> <p>Y si hacemos que las capacidades sean C1 = C2 = C y las resistencias R1 = R2 = R podemos poner que:</p> <p><center></p> <p><span><span class=MathJax_Preview>f_{c}=\dfrac{1}{2\pi\sqrt {R \cdot C}}</span><script type=math/tex>f_{c}=\dfrac{1}{2\pi\sqrt {R \cdot C}}</script></span></p> <p></center></p> <p>En el directorio "/usr/share/kicad/demos/simulation/sallen_key" tenemos el filtro pasa baja que se distribuye con KiCAD que vamos a ver brevemente. Lo adecuado es hacer una copia del directorio en nuestro directorio de trabajo para no correr el riesgo de estropear algo en el original.</p> <p>El esquema del circuito lo vemos en la imagen 10.</p> <p><center></p> <table> <thead> <tr> <th align=center>Imagen 10</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Filtro pasa baja demo" src=../../img/kicad/opamp/i10.png></td> </tr> <tr> <td align=center>Filtro pasa baja demo</td> </tr> </tbody> </table> <p></center></p> <p>Si ejecutamos el análisis podemos ver que se comporta como un filtro pasa baja de segundo orden. Será este tipo de filtro el que usemos para construir un filtro pasa banda utilizando un modelo de amplificador operacional dual.</p> <h3 id=filtro-pasa-banda-con-operacional-dual>Filtro pasa banda con operacional dual<a class=headerlink href=#filtro-pasa-banda-con-operacional-dual title="Permanent link">&para;</a></h3> <p>Para hacer el filtro vamos a necesitar un filtro pasa baja y un filtro pasa alta ambos construidos con células de Sallen-Key por lo que vamos a necesitar dos operacionales. Es evidente que se puede hacer con dos operacionales individuales, pero si lo fabricamos con un amplificador operacional dual ahorramos mucho espacio (un circuito integrado) y conseguimos que las características de ambos circuitos integrados sean muy parecidas. Vamos entonces a buscar modelos de operacionales duales y a ver como configurar todo para que funcione. La familia TL08x de Texas Instruments dispone de un modelo dual, el TL082 del que disponemos del <a href=https://www.ti.com/product/TL082>modelo spice TL082.301</a> para descargar y proceder a incorporarlo a nuestras librerías.</p> <p>Si una vez descargado abrimos el archivo de librería con el editor de textos vemos, al principio del mismo lo que apreciamos en la imagen 11, donde la flecha nos indica que es el modelo TL082 y el recuadro el orden de pines.</p> <p><center></p> <table> <thead> <tr> <th align=center>Imagen 11</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Librería TL082.301" src=../../img/kicad/opamp/i11.png></td> </tr> <tr> <td align=center>Librería TL082.301</td> </tr> </tbody> </table> <p></center></p> <p>Observamos que el modelo solamente dispone de una entrada inversora, una entrada no inversora, una salida y los pines de alimentación.</p> <p>Si en el esquemático de KiCAD intentamos añadir el operacional nos encontramos con algo similar a la imagen 12.</p> <p><center></p> <table> <thead> <tr> <th align=center>Imagen 12</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Modelo TL082 en las liberias de KiCAD" src=../../img/kicad/opamp/i12.png></td> </tr> <tr> <td align=center>Modelo TL082 en las liberias de KiCAD</td> </tr> </tbody> </table> <p></center></p> <p>Vemos como claramente habla de un amplificador operacional dual.</p> <p>Si accedemos a las propiedades del componente podemos ver que dispone de tres unidades (imagen 13), dos corresponden a las patillas de cada operacional, unidades A y B, y la unidad C que corresponde a la alimentación común a ambos operacionales.</p> <p><center></p> <table> <thead> <tr> <th align=center>Imagen 13</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Unidades del componente TL082" src=../../img/kicad/opamp/i13.png></td> </tr> <tr> <td align=center>Unidades del componente TL082</td> </tr> </tbody> </table> <p></center></p> <p>Si colocamos las tres unidades en KiCAD como en la imagen 14 vemos el aspecto que toma y como cada amplificador tiene sus propios pines de entradas y salidas. </p> <p><center></p> <table> <thead> <tr> <th align=center>Imagen 14</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="TL082 en KiCAD" src=../../img/kicad/opamp/i14.png></td> </tr> <tr> <td align=center>TL082 en KiCAD</td> </tr> </tbody> </table> <p></center></p> <p>A partir de las partes que vemos en la imagen 14 vamos a configurar el esquema de filtro pasa banda que vemos en la imagen 15.</p> <p><center></p> <table> <thead> <tr> <th align=center>Imagen 15</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Esquema de filtro pasa banda con TL082" src=../../img/kicad/opamp/i15.png></td> </tr> <tr> <td align=center>Esquema de filtro pasa banda con TL082</td> </tr> </tbody> </table> <p></center></p> <p>Necesitamos agregar el modelo spice al amplificador operacional pero ya hemos visto que el modelo descargado solamente dispone de los pines (IN+, IN-, V+, V- y OUT). Sin embargo, de acuerdo con la <a href="https://www.ti.com/lit/ds/symlink/tl082.pdf?HQS=ti-null-null-sf-df-pf-SEP-wwe&ts=1599469341100">hoja de datos TL082</a> y el diseño del circuito, necesitaremos 8 pines (1IN+, 1IN-, V+, V-, 1OUT, 2IN+, 2IN- y 2OUT) y necesitamos llamar al modelo dos veces porque tenemos dos amplificadores en el circuito. Como conclusión diremos que no se puede usar el modelo TL082.301 de TI directamente, sino que debemos convertirlo en una versión con dos amplificadores, que son los que contiene el TL082.</p> <p>Vamos a crear un archivo librería como el que vemos en la imagen 16 que contiene el código necesario para crear el subcircuito ngspice. Es necesario que el archivo librería y el original descargado estén en el mismo directorio. Las líneas de código son las siguientes:</p> <p><code>* Modelo ngspice de amplificador operacional dual</code></p> <p><code>* nombre del archivo: TL0822-dual.lib</code></p> <p><code>.subckt TL082 1OUT 1IN- 1IN+ Vcc- 2IN+ 2IN- 2OUT Vcc+</code></p> <p><code>.include TL082.301</code></p> <p><code>XU1A 1IN+ 1IN- Vcc+ Vcc- 1OUT TL082</code></p> <p><code>XU1B 2IN+ 2IN- Vcc+ Vcc- 2OUT TL082</code></p> <p><code>.ends</code></p> <p><center></p> <table> <thead> <tr> <th align=center>Imagen 16</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Librería amplificador operacional dual" src=../../img/kicad/opamp/i16.png></td> </tr> <tr> <td align=center>Librería amplificador operacional dual</td> </tr> </tbody> </table> <p></center></p> <p>Ejecutamos la simulación y ya podemos ver la respuesta en frecuencia del filtro pasa banda de orden dos, imagen 17, construido a partir de células de Sallen-Key.</p> <p><center></p> <table> <thead> <tr> <th align=center>Imagen 17</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Respuesta en frecuencia del filtro pasa banda Sallen-Key" src=../../img/kicad/opamp/i17.png></td> </tr> <tr> <td align=center>Respuesta en frecuencia del filtro pasa banda Sallen-Key</td> </tr> </tbody> </table> <p></center></p> <p>El ejemplo lo podemos <a href=../kc-ejemplos/opamp/pasa-banda-sallen-key/pasa-banda-sallen-key.zip>descargar</a> para trabajar con el mismo.</p> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Pie> <a href=../ampl-bip/ title="Amplificador con transistor bipolar" class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Anterior </span> Amplificador con transistor bipolar </div> </div> </a> <a href=../temp-555/ title="Temporizador 555" class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Siguiente </span> Temporizador 555 </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2020 - 2025 Federico Coca </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/vendor.d710d30a.min.js></script> <script src=../../assets/javascripts/bundle.b39636ac.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copiar al portapapeles", "clipboard.copied": "Copiado al portapapeles", "search.config.lang": "es", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados"}</script> <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>